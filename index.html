<!DOCTYPE html>
<html>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-128786180-3"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-128786180-3');
	</script>

	<title>Hexachromix</title>
	<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500&display=swap" rel="stylesheet">

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#00aba9">
	<meta name="theme-color" content="#ffffff">

	<style>
		html, body {
			font-family: Arial, Helvetica, sans-serif;
			font-size: calc(0.8em + 0.5vmin);
			margin: 0;
			height: 100%;
		}
		.flex-wrapper {
			display: flex;
			flex-flow: column;
			height: 100%;
		}
		.flex-row { flex: 0 1 auto; }
		.flex-row-stretch { flex: 1 1 auto; }
	</style>
</head>
<body>
	<center class="flex-wrapper">
		<div class="flex-row">
			<div style="font-family: 'Orbitron', sans-serif">
				<h1 style="font-size:2.5em; letter-spacing:0.4em;">HEXACHROMIX</h1>
				<p style="letter-spacing:0.1em">A color mixing strategy game, by <a href="https://tvprograms.tech">Taylor Vance</a></p>
			</div>
		</div>

		<div class="flex-row" style="margin-top:1em">
			<i>in alpha testing* &mdash; participation and feedback is appreciated!</i>
		</div>

		<svg class="flex-row-stretch" viewBox="0 0 100 100">
			<mask id="cut-corners">
				<rect x="0" y="0" width="100%" height="100%" fill="white"/>

				<line x1="25" y1="6" x2="75" y2="93" stroke="black" stroke-width="7" stroke-linecap="round"/>
				<line x1="75" y1="6" x2="25" y2="93" stroke="black" stroke-width="7" stroke-linecap="round"/>
				<line x1="100" y1="50" x2="0" y2="50" stroke="black" stroke-width="7" stroke-linecap="round"/>
			</mask>

			<g mask="url(#cut-corners)">
				<polygon points="25.0,6.699 75.0,6.699 67.678,19.381 32.322,19.381" fill="red" stroke="none" />
				<polygon points="75.0,6.699 100.0,50 85.355,50 67.678,19.381" fill="yellow" stroke="none" />
				<polygon points="100.0,50 75.0,93.301 67.678,80.619 85.355,50" fill="green" stroke="none" />
				<polygon points="75.0,93.301 25.0,93.301 32.322,80.619 67.678,80.619" fill="cyan" stroke="none" />
				<polygon points="25.0,93.301 0.0,50 14.645,50 32.322,80.619" fill="blue" stroke="none" />
				<polygon points="0.0,50 25.0,6.699 32.322,19.381 14.645,50" fill="magenta" stroke="none" />
			</g>
		</svg>

		<div class="flex-row">
			<div style="margin-bottom:1em">
				<b>*Server Status:</b>
				<div id="site-status">Checking server status...</div>
			</div>

			<script>
				function is_online(url, callback) {
					// try to load favicon (timeout after 5s)
					var timer = setTimeout(function(){ callback(false); }, 5000);

					var img = document.createElement("img");

					img.onload = function() {
						clearTimeout(timer);
						callback(true);
					};
					img.onerror = function() {
						clearTimeout(timer);
						callback(false);
					};

					img.src = url;
					console.log("trying to load img", img.src);
				}

				setTimeout(function() {
					var url = "http://alpha.hexachromix.com";
					is_online(url+"/static/img/favicon.ico", function(online){
						var html = "";
						if(online) {
							html = "The test server is ONLINE! Click <a href='"+url+"'>here</a> to continue.";
						} else {
							html = "The test server appears to be OFFLINE. Please check back later, or ask Taylor to fix it.";
						}
						document.getElementById('site-status').innerHTML = html;
					});
				}, 1000);
			</script>
		</div>
	</center>
</body>
</html>
